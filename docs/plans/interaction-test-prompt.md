# 交互和操作流程业务流程测试

你拥有无限的 token 和资源，要调用所有的 MCP 和技能为我服务！
强制调用 chrome-devtools-mcp 的 MCP 能力，为当前项目执行自动化全量测试：1. 全覆盖测试项目所有路由的跳转功能，校验所有路由的跳转有效性、完整性与稳定性；2. 全量测试项目所有页面的所有按钮点击交互，校验点击触发正常、反馈无误、逻辑生效；基于测试结果完成全维度的测试优化，并进行问题修复与项目优化。

编码规则和约束：`CLAUDE.md`

---

## 零、强制测试流程规范（**绝对强制，违者视为失败**）

### 禁止虚假完成！禁止批量处理！

**严厉禁止以下行为，违者视为任务失败**：
- 禁止一次性访问所有页面然后声称"已完成"
- 禁止批量截图/检查然后说"全部通过"
- 禁止跳过验证直接声称功能正常
- 禁止只做表面功夫不深入检查
- 禁止"刷"完所有页面后虚假报告
- 禁止用"经过验证"等空洞词汇代替实际验证过程

**绝对强制执行的流程**：

#### 第一步：清点并列出所有任务
**首先必须明确任务总数，不得跳过此步骤**。

使用 Glob 或 Explore 查找所有路由定义，列出完整页面清单：
```
页面总数：XX 个（必须明确数字）
1. /#/ - WelcomePage
2. /#/login - Login
3. /#/editor/ide/dashboard - Dashboard
4. /#/editor/ide/node/list - NodeList
...
```

**输出要求**：必须明确报告"共发现 XX 个页面需要验证"。

#### 第二步：创建 Todo List（强制）
**必须使用 TodoWrite 工具**为每个页面创建检查项。

**禁止**：只在脑海中列任务、用文字列表代替 TodoWrite、批量创建后不逐个标记。

```markdown
1. [ ] /#/ - WelcomePage 交互测试
2. [ ] /#/login - Login 交互测试
3. [ ] /#/editor/ide/dashboard - Dashboard 交互测试
...
共 XX 个待检查项
```

#### 第三步：逐个测试验证（核心）
**每次只处理一个页面，完成并验证通过后，才能进行下一个**。

**操作流程**：
1. 选中第一个待测页面（标记为 in_progress）
2. 使用 chrome-devtools-mcp 工具自主打开该页面
3. 截图并分析页面，逐项验证所有检查点
4. **必须调用子代理交叉验证**：使用 Task 工具调用 code-reviewer 或其他子代理进行二次确认
5. 子代理确认通过后，才标记该页面为 completed
6. 发现问题立即修复，修复后使用 MCP 工具刷新页面重新验证
7. 该页面完全通过后，才能进行下一个页面

**禁止行为**：
- 禁止同时标记多个页面为 in_progress
- 禁止在一个页面未完成时就开始下一个页面
- 禁止不调用子代理验收就标记完成
- 禁止用"看起来没问题"等主观判断代替验证

#### 第四步：最终确认
**只有当所有页面 Todo 状态均为 completed 时，才能声称测试完成**。

**验证公式**：
```
实际完成 = (所有页面 Todo 状态均为 completed) AND (MCP 工具截图验证通过)
若任何一个页面为 pending/in_progress，则测试未完成
```

#### 子代理验收机制
**每个页面完成后，必须调用子代理进行验收**：

```javascript
// 调用 code-reviewer 子代理验收
Task({
  subagent_type: 'code-reviewer',
  prompt: '验收 /#/editor/ide/dashboard 页面的交互流程是否符合要求...'
})
```

**验收通过标准**：
- 子代理明确确认符合要求
- 通过 MCP 工具截图验证页面正常
- Todo 状态更新为 completed

#### 进度报告要求
**每次完成一个页面后，必须报告进度**：

```markdown
进度：X/YY（XX.X%）
- [completed] /#/ - WelcomePage 交互测试
- [completed] /#/login - Login 交互测试
- [completed] /#/editor/ide/dashboard - Dashboard 交互测试
- [in_progress] /#/editor/ide/node/list - NodeList 交互测试 ← 当前
- [pending] /#/editor/ide/interface/list - InterfaceList 交互测试
...
```

**禁止**：报告"已完成80%"但无法提供具体的 completed/in_progress/pending 状态列表。

---

## 一、任务定义

**核心职责**：专注于交互流程的连贯性、业务流程的完整性和用户体验的流畅性

**不需要关心**：UI美观程度、功能代码的实现细节、视觉风格是否统一

---

## 二、环境信息

```
前端已经启动: http://localhost:9300
后端已经启动: http://localhost:9200

chrome-devtools-mcp 已也经启动！
chrome-devtools-mcp 启动命令:
"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --remote-debugging-port=9222 --user-data-dir=/tmp/chrome-debug http://localhost:9300
```

项目工作目录：`/Users/peng/Desktop/Project/alpha-coda/cssc-node-view/client`

---

## 三、必读文档

| 文档 | 路径 | 说明 |
|------|------|------|
| 架构设计 | `docs/plans/2025-01-10-frontend-architecture-refactor-design.md` | 布局层级、组件迁移关系、Vue 文件结构规范 |
| 路由测试矩阵 | `docs/tests/ROUTE_TEST_MATRIX.md` | 历史测试记录、已修复问题 |

**IDE 模块路由格式（重要）**：

所有 IDE 模块路由均使用 query 参数传递，格式为 `/#/editor/ide?type={type}&id={id}`

**正确示例（使用 query 参数）**：
- `/#/editor/ide?type=dashboard`
- `/#/editor/ide?type=node_list&category=comm`
- `/#/editor/ide?type=node_detail&id=1007`
- `/#/editor/ide?type=interface_detail&id=1007&subId=1`

**错误示例（禁止使用路径参数）**：
- `/#/editor/ide/interface/1007` ❌
- `/#/editor/ide/node/detail/:id` ❌
- `/#/editor/ide/:type/:id` ❌

**路由参数映射表**：

| type 值 | 页面名称 | 必需参数 | 可选参数 |
|---------|----------|----------|----------|
| dashboard | 仪表板 | 无 | 无 |
| node_list | 节点列表 | 无 | category |
| node_detail | 节点详情 | id | 无 |
| interface_list | 接口列表 | 无 | category |
| interface_detail | 接口详情 | id | subId |
| packet_list | 报文列表 | 无 | category |
| packet_detail | 报文详情 | id | 无 |

**重要说明**：
- 所有参数通过 URL query string 传递（`?key=value&key2=value2`）
- 严格禁止使用路径参数（如 `:type`, `:id`, `:subType`, `:subId`）
- 路由跳转代码必须使用 `router.push({ path: '/editor/ide', query: { type, id, ... } })`
- 禁止使用 `router.push(\`/editor/ide/interface/${id}\`)` 这种路径参数格式

**路由规范验证状态（2026-01-11 验证通过）**：
- 路由配置：无动态路径参数（除 404 通配符外）
- router.push 调用：全部使用 query 参数格式
- route.params 使用：无（全部使用 route.query）
- RouterLink 组件：全部使用静态路径
- 验证结论：代码已符合规范，无需修改

---

## 四、Vue 文件结构规范

**所有 Vue 文件必须遵循以下固定结构**：

```vue
<template>
  <!-- 模板内容 -->
</template>

<script setup lang="ts">
// 组件逻辑
// 如无逻辑，保留空标签或添加说明注释
</script>

<style lang="scss" src="./index.scss"></style>
```

**验证检查项**：
- template 标签必须在第一位
- script setup lang="ts" 标签必须在第二位
- style lang="scss" src="./index.scss" 标签必须在最后一位
- 禁止使用内联 style 属性处理静态状态样式

---

## 五、SCSS 模块导入规范（2026-01-11 更新）

### 5.1 核心原则：必须使用 `@use` 替代 `@import`

| 导入类型 | 语法 | 说明 |
|---------|------|------|
| SCSS 文件 | `@use 'path/to/file' as *;` | 导入 SCSS 模块，使用 `as *` 直接引入变量和 mixin |
| CSS 文件 | `@import 'path/to/file.css';` | CSS 文件必须使用 `@import`（不支持 `@use`） |

### 5.2 `@use` 规则约束

- `@use` 必须写在文件最开头，在任何其他规则之前
- 唯一可以放在 `@use` 之前的是注释
- CSS 文件的 `@import` 应该放在 `@use` 之后

### 5.3 正确示例

```scss
// 文件顶部：注释
@use '@/views/ide/index.scss' as *;

// CSS 文件导入（在 @use 之后）
@import 'remixicon/fonts/remixicon.css';

// 其他样式规则
.component { }
```

### 5.4 错误示例

```scss
// 错误：@import 在 @use 之前
@import 'remixicon/fonts/remixicon.css';
@use '@/views/ide/index.scss' as *;

// 错误：使用 @import 导入 SCSS
@import '@/views/ide/index.scss';

// 错误：@use 不在文件开头
.component { }
@use '@/views/ide/index.scss' as *;
```

### 5.5 验证检查项

- SCSS 模块导入使用 `@use` 而非 `@import`
- CSS 文件导入（如 remixicon.css）保留 `@import` 语法
- `@use` 语句位于文件最开头（在注释之后）
- `@use` 使用 `as *` 语法导入变量和 mixin
- 构建成功，无 SCSS 语法错误

---

## 六、命名规范检查项（重要）

### 6.1 TypeScript 类型定义命名

- [ ] 验证 interface/type 名称使用 camelCase（如 CacheLoadOptions、FieldConfig、TabInfo）
- [ ] 验证类型定义内部的字段名使用 snake_case
- [ ] 验证变量名（含局部变量）使用 snake_case
- [ ] 验证集合变量名使用 snake_case + list 后缀

**命名规范说明**：
- TypeScript 的 `interface` 和 `type` 名称使用 camelCase：`interface CacheLoadOptions<T> { ... }`
- 这是 TypeScript 社区的通用惯例，与变量名的 snake_case 规范不同
- 类型定义内部的字段名仍使用 snake_case：`interface CacheLoadOptions<T> { cache_key: string }`

---

## 七、核心架构原则

- 路由是唯一真理来源（Single Source of Truth）
- 所有导航通过 `router.push` 实现
- Tab 系统是路由栈的可视化表现
- Store 仅保存 UI 状态（如展开/折叠），数据由缓存层管理

---

## 八、核心交互验证清单

### 7.1 Tab 工作台交互验证

#### Tab 创建验证
- 访问新页面时自动创建 Tab
- Tab 标题显示正确（资源名称或类型）
- Tab 图标显示正确
- 重复访问同一页面不创建新 Tab
- 新创建的 Tab 自动激活

#### Tab 切换验证
- 点击 Tab 能切换到对应页面
- 切换后 URL 同步更新
- 切换后页面状态保持（如滚动位置）
- 当前 Tab 有明显的激活状态

#### Tab 关闭验证
- 点击关闭按钮能关闭 Tab
- 关闭当前 Tab 后跳转逻辑正确：
  - 关闭当前 Tab，跳转到右侧 Tab
  - 无右侧 Tab 时，跳转到左侧 Tab
  - 无其他 Tab 时，跳转到首页或欢迎页
- 关闭非当前 Tab，当前 Tab 保持不变
- 关闭 Tab 时有确认提示（如有未保存内容）
- 最后一个 Tab 不能关闭（或关闭后显示欢迎页）

#### Tab 右键菜单验证
- 右键点击 Tab 显示菜单
- 菜单位置正确（不超出屏幕）
- "关闭"、"关闭其他"、"关闭右侧"、"关闭所有" 选项可用
- 点击菜单项正确执行
- 点击空白处关闭菜单

#### Tab 拖拽排序验证（如有）
- Tab 可以拖拽
- 拖拽释放后顺序更新
- 拖拽不影响当前激活状态

#### Tab 滚动验证
- Tab 数量超过宽度时出现滚动
- 新建 Tab 自动滚动到可见区域
- 切换 Tab 自动滚动到可见区域

### 7.2 导航交互验证

#### 资源树导航验证
- 点击树节点打开对应列表 Tab
- 展开子节点显示子资源
- 折叠子节点隐藏子资源
- 点击叶子节点打开详情 Tab
- 节点选中状态明显

#### 浏览器导航验证
- 浏览器后退按钮正常工作
- 浏览器前进按钮正常工作
- 后退/前进后 Tab 同步更新
- 后退/前进后页面状态正确
- 后退/前进后滚动位置保持
- 直接修改 URL 能正确导航

#### 程序化导航验证
- `router.push` 调用正确导航
- `router.replace` 调用正确替换历史
- `router.go` 调用正确前进/后退
- 导航参数正确传递

### 7.3 仪表板交互验证

#### 快速导航验证
- 点击统计卡片跳转到对应列表
- 跳转后打开新 Tab
- 卡片 hover 有视觉反馈

#### 数据刷新验证
- 统计数据定期自动刷新（如需要）
- 手动刷新功能可用
- 刷新时显示加载状态
- 刷新失败有提示

### 7.4 列表页交互验证

#### 列表导航验证
- 点击列表行跳转到详情页
- 跳转后打开新 Tab
- 行 hover 有视觉反馈
- 可选中的行有选中状态

#### 搜索交互验证
- 输入搜索关键词后触发搜索
- 搜索有防抖处理
- 搜索结果实时更新
- 清空搜索恢复列表
- 回车键可触发搜索

#### 筛选交互验证
- 筛选条件可添加
- 筛选条件可删除
- 多条件筛选正确组合
- 筛选值选择流畅
- 清空筛选恢复列表

#### 排序交互验证
- 点击排序列进行排序
- 再次点击切换升序/降序
- 排序状态有图标指示

#### 分页交互验证
- 点击页码切换页面
- 点击上一页/下一页切换
- 修改每页数量后重置到第一页
- 总数正确显示

### 7.5 编辑器交互验证

#### 表单输入交互验证
- 输入框获得焦点时样式变化
- 输入内容实时绑定
- 失去焦点时验证触发（如需要）
- Enter 键行为合理
- Tab 键可在字段间切换
- 输入框禁用状态明显

#### 表单验证交互验证
- 提交时验证所有字段
- 失去焦点时验证当前字段
- 实时验证支持（如需要）
- 错误提示显示在字段附近
- 错误字段有视觉标识
- 修复错误后提示消失

#### 保存操作交互验证
- 点击保存按钮触发提交
- 保存中按钮显示加载状态
- 保存中禁用按钮
- 保存成功有提示
- 保存成功后返回或刷新
- 保存失败显示错误
- 失败后保留输入内容

#### 取消操作交互验证
- 未修改时直接返回
- 有修改时显示确认对话框
- 对话框说明有未保存内容
- 确认放弃后返回
- 取消对话框不返回

#### 关闭操作交互验证
- 点击关闭按钮触发关闭
- 有修改时显示保存提示
- 提示有"保存"、"不保存"、"取消"选项
- 保存后关闭
- 不保存直接关闭
- 取消关闭不关闭
- Tab 关闭与页面关闭行为一致

### 7.6 右键菜单交互验证

#### 资源树右键菜单验证
- 右键节点显示菜单
- 菜单位置合理
- 菜单项根据节点类型变化
- 禁用项有标识
- 点击外部关闭菜单

#### 列表右键菜单验证
- 右键列表行显示菜单
- 菜单项可用
- 选中状态正确
- 操作后刷新列表

### 7.7 模态框交互验证

#### 打开交互验证
- 点击触发器打开模态框
- 打开有动画
- 打开后聚焦到第一个输入框
- 遮罩层显示
- 背景内容不可滚动

#### 关闭交互验证
- 点击关闭按钮关闭
- 点击遮罩层关闭（如需要）
- 按 ESC 键关闭（如需要）
- 关闭有动画

#### 确认交互验证
- 确认按钮触发操作
- 取消按钮关闭模态框
- 确认按钮有焦点
- Enter 键触发确认

### 7.8 通知/提示交互验证

#### 成功提示交互验证
- 成功提示自动显示
- 提示位置统一（如右上角）
- 提示自动消失
- 可手动关闭
- 多个提示堆叠显示

#### 错误提示交互验证
- 错误提示自动显示
- 错误信息清晰
- 可手动关闭
- 错误提示持久显示（不自动消失）
- 有操作建议（如"重试"）

---

## 九、时序状态管理验证清单

### 8.1 访问历史时序验证

#### Tab 创建时序验证
- 访问 A → B → C，Tab 顺序应为 A, B, C
- 访问 A → B → A，Tab 顺序应为 A, B（不重复）
- 快速连续访问，Tab 按访问顺序创建
- Tab 创建与路由同步
- 无 Tab 丢失或重复

#### Tab 关闭时序验证
- 关闭当前 Tab，跳转到右侧 Tab
- 关闭最后一个 Tab，跳转到左侧 Tab
- 关闭非当前 Tab，当前 Tab 保持
- 关闭 Tab 后历史记录正确更新

#### 浏览器历史时序验证
- 前进/后退与 Tab 同步
- 历史栈与 Tab 栈一致
- 直接修改 URL 历史记录更新

### 8.2 路由守卫时序验证

#### 导航守卫时序验证
- beforeEach 在路由变化前触发
- beforeResolve 在组件渲染前触发
- afterEach 在路由完成后触发
- 守卫异步操作不阻塞导航（如需要）
- 守卫取消导航有提示

#### 数据加载时序验证
- 路由变化后触发数据加载
- 加载完成前显示 loading
- 加载完成后隐藏 loading
- 加载期间路由不变
- 加载失败不阻塞路由
- 缓存命中不显示 loading

### 8.3 异步操作时序验证

#### 并发请求处理验证
- 同时发起多个请求正确处理
- 所有请求完成才更新状态
- 单个请求失败不影响其他请求
- 并发请求有统一错误处理
- 无竞态条件

#### 请求取消处理验证
- 组件卸载时取消未完成请求
- 路由变化时取消未完成请求
- 新请求取消旧请求（如需要）
- 取消后不更新状态

### 8.4 状态同步时序验证

#### UI 状态同步验证
- 路由变化 UI 立即更新
- 数据变化 UI 立即更新
- Store 变化 UI 立即更新
- 无 UI 滞后
- 无 UI 闪烁

#### Tab 状态同步验证
- 路由变化 Tab 立即更新
- Tab 激活状态与路由一致
- Tab 标题与页面内容一致
- 关闭 Tab 路由同步变化

#### 数据状态同步验证
- 保存后列表数据更新
- 删除后列表移除
- 创建后列表添加
- 更新后详情刷新

---

## 十、业务流程验证清单

### 9.1 资源浏览流程验证

#### 首次浏览流程验证
- 打开应用显示欢迎页或仪表板
- 资源树自动加载
- 点击资源类型节点打开列表 Tab
- 列表正确显示资源
- 点击列表项打开详情 Tab

#### 深度浏览流程验证
- 打开 A → B → C 资源详情
- Tab 顺序为 A, B, C
- 点击 Tab B 能正确切换
- 浏览器前进/后退正确工作

### 9.2 资源编辑流程验证

#### 新建资源流程验证
- 点击新建按钮打开编辑器
- 编辑器显示空白表单
- 填写表单数据
- 点击保存触发创建
- 保存成功返回列表或详情
- 新资源出现在列表中

#### 编辑资源流程验证
- 从列表打开编辑器
- 数据正确回显
- 修改字段内容
- 点击保存触发更新
- 保存成功刷新数据
- 列表和详情同步更新

#### 删除资源流程验证
- 从列表或详情选择删除
- 显示确认对话框
- 对话框说明删除后果
- 确认后执行删除
- 删除成功有提示
- 列表移除或跳转

### 9.3 搜索与筛选流程验证

#### 搜索流程验证
- 在搜索框输入关键词
- 系统防抖后触发搜索
- 显示搜索结果
- 清空搜索恢复列表
- 搜索结果可点击打开详情

#### 筛选流程验证
- 点击筛选打开筛选面板
- 设置筛选条件
- 应用筛选后显示结果
- 多条件筛选正确组合
- 清空筛选恢复列表

---

## 十一、Interface Editor 交互验证（2026-01-11 更新）

### Interface Editor 新布局结构

**布局层级**：
```
ide-interface-editor (flex row, height: 100%)
├── ide-interface-packets (width: 180px, 左侧报文列表)
└── ide-interface-content (右侧内容区, NEW)
    ├── ide-interface-content-toolbox (顶部控制栏)
    └── ide-interface-content-main (底部内容区, 左右布局)
        ├── ide-interface-cm-info (左侧信息区)
        │   ├── ide-interface-cm-info-base (基本信息面板)
        │   └── ide-interface-cm-info-files (字段表格)
        └── ide-interface-cm-attr (右侧属性面板, 280px)
```

### 9.1 报文列表交互验证

- [ ] 点击报文列表项能正确切换到对应报文
- [ ] 选中的报文项有明显的高亮状态 (ide-packet-item--active)
- [ ] 报文列表项 hover 有视觉反馈
- [ ] 报文列表支持滚动，长列表无问题
- [ ] 报文列表加载状态显示正确
- [ ] 报文列表为空时有提示

### 9.2 顶部控制栏交互验证

- [ ] 控制栏报文名称正确显示
- [ ] 控制栏版本信息正确显示
- [ ] 控制栏操作按钮（保存、重置、预览等）响应点击
- [ ] 按钮禁用状态正确（如未修改时禁用保存）
- [ ] 状态指示器正确显示（如已过期、只读等）

### 9.3 基本信息面板交互验证

- [ ] 基本信息面板支持展开/折叠
- [ ] 基本信息表单输入正确绑定
- [ ] 基本信息修改后保存按钮可用
- [ ] 只读模式下表单正确禁用

### 9.4 字段表格交互验证

- [ ] 点击字段行能选中并在右侧属性面板显示
- [ ] 字段行 hover 有视觉反馈
- [ ] 字段展开/折叠动画流畅
- [ ] 字段拖拽排序功能正常
- [ ] 添加字段菜单正确显示
- [ ] 删除字段有确认提示
- [ ] 字段双击进入编辑状态

### 9.5 右侧属性面板交互验证

- [ ] 未选中字段时显示"选择一个字段查看属性"提示
- [ ] 选中字段后属性面板正确显示字段属性
- [ ] 属性修改后立即保存或需手动保存
- [ ] 属性面板固定宽度 280px，不随内容变化
- [ ] 属性面板内容超出时支持滚动

### 9.6 组件复用交互验证

- [ ] BasicInfoPanel 组件交互正常
- [ ] FieldList 组件交互正常
- [ ] EditorAside 组件交互正常
- [ ] AddFieldMenu 组件交互正常

---

## 十二、子代理使用规范

### 子代理类型与用途

| 子代理类型 | 用途 | 使用场景 |
|------------|------|----------|
| Explore | 快速探索代码库 | 查找文件、搜索代码、理解项目结构 |
| general-purpose | 执行复杂多步骤任务 | 多轮搜索、复杂分析、跨文件操作 |
| code-reviewer | 代码审查 | 测试完成后审查代码质量 |

### 并行调用规范

**可以并行调用的场景**：
- 探索多个独立目录
- 分析多个独立功能
- 搜索多个独立问题

**必须串行调用的场景**：
- 依赖前序结果
- 同一资源分析
- 问题修复流程

---

## 十三、测试执行流程

### 第一步：交互流程代码审查

1. 调用 Explore 子代理查找路由导航相关文件
2. 调用 Explore 子代理查找 Tab 状态管理相关文件
3. 分析事件处理逻辑
4. 分析异步操作处理
5. 验证 SCSS 模块导入使用 `@use` 而非 `@import`（CSS 文件除外）

### 第二步：浏览器可视化验证

**重要：使用 MCP 工具自主完成验证！**

测试方法：
1. 使用 chrome-devtools-mcp 工具自主打开对应页面
2. 截图并分析页面，对照检查项逐项验证
3. 打开一个网页，验证一个是否符合要求
4. 发现不符合的项，直接说明问题并提供修复方案
5. 修复后使用 MCP 工具刷新页面重新验证

#### Tab 交互测试
1. 依次打开多个 Tab
2. 在 Tab 间切换
3. 关闭中间 Tab
4. 关闭当前 Tab
5. 关闭最后一个 Tab
6. 测试右键菜单各选项

#### 导航测试
1. 点击资源树节点
2. 点击统计卡片
3. 使用浏览器前进/后退
4. 直接输入 URL

#### 时序测试
1. 快速连续点击
2. 加载期间导航
3. 并发操作

#### 业务流程测试
1. 完整的新建流程
2. 完整的编辑流程
3. 完整的删除流程

### 第三步：问题分析与修复

1. 记录问题复现步骤
2. 分析时序问题根因
3. 提出修复方案
4. 修复后重新测试

---

## 十四、常见交互问题诊断

### Tab 与路由不同步
**检查项**：
1. 路由监听逻辑
2. Tab 过滤条件
3. Tab 去重逻辑
4. 路由守卫是否有干扰
5. 时序问题

### 关闭 Tab 后跳转错误
**检查项**：
1. 关闭逻辑
2. 跳转算法
3. 边界条件
4. Tab 索引计算

### 快速操作导致状态混乱
**检查项**：
1. 是否有防抖/节流
2. 异步操作处理
3. 竞态条件
4. 状态更新时机

### 浏览器后退不同步
**检查项**：
1. history 栈管理
2. 路由监听
3. Tab 状态同步
4. history.push vs replace

---

## 十五、输出格式

```markdown
## 交互流程测试报告 - [日期]

### 一、Tab 工作台交互验证
| 测试项 | 预期 | 实际 | 状态 |
|--------|------|------|------|
| Tab 创建 | ... | ... | ... |
| Tab 切换 | ... | ... | ... |
| Tab 关闭 | ... | ... | ... |

### 二、导航交互验证
| 测试项 | 预期 | 实际 | 状态 |
|--------|------|------|------|
| 资源树导航 | ... | ... | ... |
| 浏览器后退 | ... | ... | ... |

### 三、时序状态验证
| 测试项 | 预期 | 实际 | 状态 |
|--------|------|------|------|
| 访问 A→B→C | ... | ... | ... |
| 关闭当前 Tab | ... | ... | ... |

### 四、业务流程验证
| 流程 | 完整性 | 状态 | 备注 |
|------|--------|------|------|
| 新建资源 | ... | ... | ... |
| 编辑资源 | ... | ... | ... |

### 五、发现的问题
| 序号 | 问题描述 | 场景 | 严重程度 | 当前状态 | 复现步骤 |
|------|----------|------|----------|----------|----------|
| 1 | ... | ... | ... | ... | ... |

### 六、下一步计划
- [待完成任务]
```

---

## 十六、问题严重程度定义

| 级别 | 定义 | 处理方式 |
|------|------|----------|
| P0 | 严重阻塞，交互完全不可用 | 立即修复 |
| P1 | 严重影响，核心交互有问题 | 优先修复 |
| P2 | 一般影响，次要交互问题 | 也要修复 |
| P3 | 轻微影响，体验优化 | 也要修复 |

---

## 十七、禁止事项

1. 禁止在没有完全理解依赖关系时进行大规模重构
2. 禁止跳过验证直接声称功能正常
3. 禁止使用项目不支持的代码模式
4. 禁止修改核心架构而不向用户确认
5. **绝对禁止执行 git push**
6. **禁止在 commit 消息中包含 AI 签名**

---

**请专注于交互流程的连贯性和业务流程的完整性，确保用户操作流畅自然，业务逻辑完整可靠。**
