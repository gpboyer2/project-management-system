
### 项目概述与核心策略

为在5周内完成MVP交付，我们采用以下核心策略与架构调整：

1. MVP范围：只实现能跑通一个最核心的 “报文配置 -> 组织结构配置 -> 流程配置 -> 代码生成 -> 保存” 软件使用流程所必需的功能。
2. 技术取舍：
-   Node-RED：最大化利用其现有能力，只做必要的改编和定制。
-   后端：使用Node.js，与Node-RED原生技术栈保持一致，减少技术异构。
-   数据存储：使用SQLlite。
-   IDL：使用JSON Schema代替自定义IDL语言，简化设计和解析复杂度。
3. 功能删减：
-   完全移除：用户权限、协同与版本控制、审计日志、调试器、监控仪表盘、租户隔离、图元节点库管理（功能由代码写死，数据使用假数据）。
-   极度简化：协议支持（只实现TCP和UDP）、代码生成（一个图元生成一套可执行文件(包含一个.h文件和一个.cpp文件)）、UI/UX（以功能为主，不做美化）。
4. 工作模式：
-   并行开发：前后端、Node.js引擎同时开工，通过预先定义好的接口契约（JSON格式）进行解耦。
-   每日集成：每天下班前进行一次集成，尽早暴露问题。
-   关键路径：俊宇和王盟负责的报文解析/构建引擎是关键路径，必须被最优先地定义和支持。

#### 架构调整：数据访问层抽象

1. 使用SQLlite处理数据;
2. 数据模型先行：在第1天，俊宇就需要定义好所有核心数据实体的JSON Schema（流程、节点、报文格式、系统建模结构等）。这是整个项目的数据契约。
3. API与存储分离：后端API层（如Express.js路由）将调用SQLlite来获取数据。

---

### 5周极限冲刺排期表

#### 第1周：基础框架与数据契约和UI流程体现

-   贵鹏
    1. (首要任务) 搭建Node-RED前端二开环境，并完成基础项目配置 ;
    2. 基于Node-RED定制基础节点UI样式，为后续系统建模节点提供统一视觉基础 ;
    3. 设计并实现树状视图的基础框架与布局，确保其在Node-RED环境中能正确渲染和占据指定区域 ;
    4. 基于Node-RED实现节点拖拽、连线、删除等核心生命周期管理 ;

-   俊新
    1. (首要任务) Node.js后端项目初始化;
    2. (关键任务) 配合俊宇和王盟，将 "报文的解析/构建" 的C++代码 转为NodeJs和前端Vue代码，明确技术路径和分工 ;
    3. 基于 Node.js后端项目 的Express API，调用SQLlite进行数据CRUD自测试，需要编写单元测试，验证NodeJs报文解析/构建引擎的功能正确性 ;

-   俊宇
    1. (关键任务) 在俊新和王盟的配合下，将 "报文的解析/构建" 转为 NodeJs 代码 ;
    2. 数据库设计 ;

-   王盟
    1. 核心数据实体(报文协议)的JSON Schema ;
    2. (关键任务) 配合俊宇和俊新，提供C++引擎的核心代码和逻辑说明, 将 "报文的解析/构建" 相关C++代码 转为 NodeJs 代码 ;
    3. 提供 "报文的解析/构建" 相关C++代码 的测试用例和预期结果，用于验证NodeJs实现的正确性 ;
    4. 提供所有必需的C++代码片段;
    5. 持续性的进行"还原性验证"，确保B/S前后端实现与需求一致 ;

---

#### 第2周：系统建模与报文处理和流程处理API接口

-   贵鹏
    1. 实现前端界面树状视图的UI/UX设计 ;
    2. 实现前端界面树状节点的展开、折叠、选择功能 ;
    3. 实现前端界面树状节点的创建、重命名、删除功能，需要具备校验逻辑 ;

-   俊新
    1. 实现图形化界面调用Nodejs后端去"报文的解析/构建"的业务API接口，包括报文选择、数据输入/输出展示等核心组件 ;
    2. 实现节点与流程 的NodeJs API接口 ;

-   俊宇
    1. 将王盟原C++代码转为NodeJs代码: 即实现 "报文的解析/构建" 的NodeJs代码 ;
    2. 开发 "报文的解析/构建" 的完整测试套件，覆盖所有已支持的数据类型和边界情况 ;
    3. 为 "报文的解析/构建" 功能提供稳定、健壮的后端API ;
    4. 完善DAL的健壮性（错误处理、并发） ;

-   王盟
    1. 提供所有必需的C++代码片段;
    2. 配合验证NodeJs"报文的解析/构建"代码输出结果的正确性 ;
    3. 持续性的进行还原性验证，确保B/S前后端实现与需求一致 ;

---

#### 第3周：通信数据转换与拓扑视图和API接口联调

-   贵鹏
    1. 实现拓扑视图的基础渲染与交互，支持缩放和平移，实现节点的拖拽和连接功能 ;
    2. 开发软件节点间的连接关系可视化，能根据后端数据动态渲染连接线 ;
    3. 实现通信数据转换的前端界面，与报文解析/构建功能集成，形成完整的数据流操作体验 ;
    4. 实现前端界面树状视图与后端API的对接，完成数据的加载与保存 ;

-   俊新
    1. 实现通信数据转换的前端逻辑，将报文处理结果与流程节点关联 ;
    2. 实现树状视图与拓扑视图的数据同步机制，确保两个视图的状态一致性 ;

-   俊宇
    1. (关键任务) 完善通信数据转换的后端实现，支持在流程中调用报文解析/构建能力 ;
    2. 开发通信数据转换的完整测试套件，模拟真实的数据流转场景 ;
    3. 进入系统集成测试 ;

-   王盟
    1. 提供所有必需的C++代码片段;
    2. 持续性的进行还原性验证，确保B/S前后端实现与需求一致;

---

#### 第4周：端到端集成与测试

-   贵鹏
    1. 主导搭建完整的端到端测试场景 ;
    2. 修复前后端集成中发现的Bug ;
-   俊新
    1. 修复流程图和拓扑图的功能Bug ;
    2. 修复前后端集成中发现的Bug ;
-   俊宇
    1. 配合搭建完整的端到端测试场景 ;
    2. 修复后端集成中发现的Bug ;
    3. 实现流程文件的完整性校验（MD5） ;
    4. 编写本软件的相关接口文档和指南，为未来迁移做准备 ;
-   王盟
    1. 持续性的进行还原性验证，确保B/S前后端实现与需求一致 ;

#### 第5周：优化、文档与交付

-   全体
    1. 全流程打通 ;
-   贵鹏
    1. UI/UX最后优化与打磨 ;
    2. 准备演示Demo ;
-   俊新
    1. 编写用户手册或开发手册, 将相关数据,代码,开发环境刻入光盘准备导入 ;
    2. 协助准备Demo和文档 ;
-   俊宇
    1. 部署脚本编写 ;
    2. 系统测试 ;
    3. 编写《数据迁移指南》草案，说明如何替换DAL实现, 调研并确认数据库迁移方案 ;
-   王盟
    1. (按需支持) 解决最后的疑难杂症 ;
    2. 参与最终交付评审 ;
    3. 参加系统测试 ;

---


#### 关键产出物

-   第1周末：一个可以拖拽、连线、通过API保存/加载 (Mock数据) 进行交互的画布功能；一个能解析报文的Node.js核心代码及单元测试；一个体系完整交互流程和效果的初版前端Demo；
-   第2周末：一个功能完备的树状视图系统；一个较为完整完善的报文解析/构建图形化界面；Node.js引擎支持更多类型并有完整测试套件。
-   第3周末：一个包含拓扑视图、通信数据转换功能的完整系统；Node.js报文解析/构建引擎与前端完全集成(接口联调完成)；树状视图与拓扑视图数据同步；端到端集成测试用例。
-   第4周末：一个从系统建模到流程执行的完整、稳定的端到端Demo；
-   第5周末：一个可交付的MVP版本，包含基本文档、演示材料和《数据迁移指南》。

### 每日工作节奏

-   每日站会 (15分钟)：全体成员参加，同步进度、暴露阻塞点。

### 巨大风险与应对

1. 集成地狱：并行开发极易导致集成时问题爆发。
-   应对：严格执行每日集成，用最简单的“Hello World”级别测试验证接口。问题不过夜。
2. 性能问题：Node-RED在处理复杂流程时可能有性能瓶颈。
-   应对：先保证功能，性能问题留到第4-5周，在核心测试场景上进行优化。
3. Node.js报文引擎实现风险：C++转Node.js可能存在功能差异。
-   应对：俊新全程指导，王盟提供测试用例，俊宇编写完整测试套件，确保功能一致性。
