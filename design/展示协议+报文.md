### 方案名称：混合交互模式下的接口契约锚点 (Interface Contract Anchor with Hybrid Interaction)

#### 1. 核心设计理念

当前的连线只能展示交互协议，但实际上，一个协议上可能跑多个报文，这个报文+协议是关注的重点，应该是一等公民。

为了解决“连线承载信息有限”与“实际接口定义复杂（多报文、多信号）”之间的矛盾，本方案放弃了直接在连线上铺陈大量文本的做法，转而采用**“锚点（Anchor）+ 渐进式披露（Progressive Disclosure）”**的设计策略。

#### 2. 视觉呈现 (The Visuals)

- **连线 (The Line)**：仅代表物理或逻辑通道（Channel），保持视觉简洁，避免文字拥挤。
- **接口锚点 (The Badge)**：在每条连线的中心位置，通过算法计算坐标，悬浮一个**胶囊状徽章（Badge）**。
  - **内容**：仅展示最关键的元数据，即“协议名称”（如 CAN-FD）和“报文数量”（如 5 Msgs）。
  - **作用**：作为该通道所有接口定义的聚合入口，提示用户此处有详细契约可查。

#### 3. 交互逻辑 (The Interaction)

采用**混合模式**来满足不同深度的信息获取需求：

- **轻量级预览 (Hover / MouseEnter)**：
  - **触发**：鼠标悬停在锚点上。
  - **响应**：显示微型 **Tooltip（工具提示）**。
  - **内容**：展示接口的业务摘要（如“智驾 -> 底盘控制指令”），帮助用户快速确认链路用途，不打断浏览流。
- **深度分析 (Click)**：
  - **触发**：鼠标点击锚点。
  - **响应**：在锚点附近弹出一个**悬浮详情卡片 (Floating Card)**。
  - **内容**：完整列出该接口下定义的所有报文/信号列表（如 `Req_Torque`, `Stat_Speed`）。
  - **特性**：
    - **非模态 (Non-modal)**：不遮罩背景，允许用户同时查看底图。
    - **可拖拽 (Draggable)**：用户可按住卡片标题栏随意拖动，彻底解决弹窗遮挡关键节点的问题。

#### 4. 影响分析闭环 (The Analysis Loop)

- **报文级颗粒度**：在悬浮卡片中，用户可以选择具体的**单条报文**（而非整个协议）。
- **双向高亮**：选中报文后，系统自动高亮图上的**连线**以及两端的**软硬件组件**。
- **价值**：实现了从“宏观架构”到“微观数据定义”的无缝穿透，支持精细化的变更影响评估。

------

**一句话总结：**
 该方案通过在连线上植入**可交互的锚点**，结合**悬停预览**与**点击拖拽卡片**的混合交互模式，在保证架构图整洁的同时，实现了对海量接口报文数据的深层管理与可视化分析。